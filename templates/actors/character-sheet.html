<form class="{{cssClass}} flexcol {{#unless isEditing}}locked{{/unless}}" autocomplete="off">
    <!-- Tab Navigation -->
    <nav class="sheet-tabs tabs">
        <a class="item active" data-tab="character">Character</a>
        <a class="item" data-tab="combat">Combat</a>
        <a class="item" data-tab="equipment">Equipment</a>
    </nav>

    <div class="sheet-grid">
        <!-- Character Tab -->
        <div class="tab active" data-tab="character">
            <!-- Header Section: Picture and Personal Info -->
            <div class="header-section">
                <div class="profile-section">
                    <div class="section-header">PICTURE</div>
                    <div class="profile-img-container">
                        <img src="{{actor.img}}" data-edit="img" title="{{actor.name}}" />
                    </div>
                    <h1 class="charname">{{actor.name}}</h1>
                    <button class="toggle-edit" title="Toggle Edit Mode">
                        <i class="fas fa-lock"></i>
                    </button>
                    </div>
            
                <div class="personal-info">
                    <div class="section-header">PERSONAL IDENTIFICATION</div>
                    <div class="form-groups">
                        <div class="form-group">
                            <label>PROFESSION:</label>
                            <input type="text" name="system.personal_info.profession" value="{{system.personal_info.profession}}" />
                        </div>
                        <div class="form-group">
                            <label>RANK:</label>
                            <input type="text" name="system.personal_info.rank" value="{{system.personal_info.rank}}" />
                        </div>
                        <div class="form-group">
                            <label>NATIONALITY:</label>
                            <input type="text" name="system.personal_info.nationality" value="{{system.personal_info.nationality}}" />
                        </div>
                        <div class="form-group">
                            <label>UNIT:</label>
                            <input type="text" name="system.personal_info.unit" value="{{system.personal_info.unit}}" />
                        </div>
                    </div>
                </div>
            </div>

            <!-- Stats Section: Attributes and Status -->
            <div class="stats-section">
                <!-- Left Column: Attributes and Secondary Traits -->
                <div class="attributes-column">
                    <!-- Primary Attributes -->
                    <div class="attributes-section">
                        <div class="section-header">ATTRIBUTES</div>
                        <div class="attributes-grid">
                            <div class="attribute-group">
                                <div class="attribute-pair rollable" data-roll-type="attribute" data-attribute="AGI">
                                    <div class="attribute-label">AGI</div>
                                    <div class="attribute-input">
                                        <input type="number" name="system.attributes.AGI.value" value="{{system.attributes.AGI.value}}" {{#unless isEditing}}disabled{{/unless}} />
                                    </div>
                                </div>
                                <div class="attribute-pair rollable" data-roll-type="attribute" data-attribute="INF">
                                    <div class="attribute-label">INF</div>
                                    <div class="attribute-input">
                                        <input type="number" name="system.attributes.INF.value" value="{{system.attributes.INF.value}}" {{#unless isEditing}}disabled{{/unless}} />
                                    </div>
                                </div>
                            </div>
                            <div class="attribute-group">
                                <div class="attribute-pair rollable" data-roll-type="attribute" data-attribute="APP">
                                    <div class="attribute-label">APP</div>
                                    <div class="attribute-input">
                                        <input type="number" name="system.attributes.APP.value" value="{{system.attributes.APP.value}}" {{#unless isEditing}}disabled{{/unless}} />
                                    </div>
                                </div>
                                <div class="attribute-pair rollable" data-roll-type="attribute" data-attribute="KNO">
                                    <div class="attribute-label">KNO</div>
                                    <div class="attribute-input">
                                        <input type="number" name="system.attributes.KNO.value" value="{{system.attributes.KNO.value}}" {{#unless isEditing}}disabled{{/unless}} />
                                    </div>
                                </div>
                            </div>
                            <div class="attribute-group">
                                <div class="attribute-pair rollable" data-roll-type="attribute" data-attribute="BLD">
                                    <div class="attribute-label">BLD</div>
                                    <div class="attribute-input">
                                        <input type="number" name="system.attributes.BLD.value" value="{{system.attributes.BLD.value}}" {{#unless isEditing}}disabled{{/unless}} />
                                    </div>
                                </div>
                                <div class="attribute-pair rollable" data-roll-type="attribute" data-attribute="PER">
                                    <div class="attribute-label">PER</div>
                                    <div class="attribute-input">
                                        <input type="number" name="system.attributes.PER.value" value="{{system.attributes.PER.value}}" {{#unless isEditing}}disabled{{/unless}} />
                                    </div>
                                </div>
                            </div>
                            <div class="attribute-group">
                                <div class="attribute-pair rollable" data-roll-type="attribute" data-attribute="CRE">
                                    <div class="attribute-label">CRE</div>
                                    <div class="attribute-input">
                                        <input type="number" name="system.attributes.CRE.value" value="{{system.attributes.CRE.value}}" {{#unless isEditing}}disabled{{/unless}} />
                                    </div>
                                </div>
                                <div class="attribute-pair rollable" data-roll-type="attribute" data-attribute="PSY">
                                    <div class="attribute-label">PSY</div>
                                    <div class="attribute-input">
                                        <input type="number" name="system.attributes.PSY.value" value="{{system.attributes.PSY.value}}" {{#unless isEditing}}disabled{{/unless}} />
                                    </div>
                                </div>
                            </div>
                            <div class="attribute-group">
                                <div class="attribute-pair rollable" data-roll-type="attribute" data-attribute="FIT">
                                    <div class="attribute-label">FIT</div>
                                    <div class="attribute-input">
                                        <input type="number" name="system.attributes.FIT.value" value="{{system.attributes.FIT.value}}" {{#unless isEditing}}disabled{{/unless}} />
                                    </div>
                                </div>
                                <div class="attribute-pair rollable" data-roll-type="attribute" data-attribute="WIL">
                                    <div class="attribute-label">WIL</div>
                                    <div class="attribute-input">
                                        <input type="number" name="system.attributes.WIL.value" value="{{system.attributes.WIL.value}}" {{#unless isEditing}}disabled{{/unless}} />
                                    </div>
                                </div>
                            </div>
                        </div>
                     </div>
                     
                     <!-- Secondary Traits -->
                     <div class="secondary-section">
                        <div class="section-header">SECONDARY TRAITS</div>
                        <div class="attributes-grid">
                            <div class="attribute-group">
                                <div class="attribute-pair rollable" data-roll-type="attribute" data-attribute="STR">
                                    <div class="attribute-label">STR</div>
                                    <div class="attribute-input">
                                        <input type="number" disabled name="system.secondary_traits.STR.value" value="{{system.secondary_traits.STR.value}}" />
                                    </div>
                                </div>
                            </div>
                            <div class="attribute-group">
                                <div class="attribute-pair rollable" data-roll-type="attribute" data-attribute="HEA">
                                    <div class="attribute-label">HEA</div>
                                    <div class="attribute-input">
                                        <input type="number" disabled name="system.secondary_traits.HEA.value" value="{{system.secondary_traits.HEA.value}}" />
                                    </div>
                                </div>
                            </div>
                            <div class="attribute-group">
                                <div class="attribute-pair">
                                    <div class="attribute-label">STA</div>
                                    <div class="attribute-input">
                                        <input type="number" disabled name="system.secondary_traits.STA.value" value="{{system.secondary_traits.STA.value}}" />
                                    </div>
                                </div>
                            </div>
                            <div class="attribute-group">
                                <div class="attribute-pair">
                                    <div class="attribute-label">UD</div>
                                    <div class="attribute-input">
                                        <input type="number" disabled name="system.secondary_traits.UD.value" value="{{system.secondary_traits.UD.value}}" />
                                    </div>
                                </div>
                            </div>
                            <div class="attribute-group">
                                <div class="attribute-pair">
                                    <div class="attribute-label">AD</div>
                                    <div class="attribute-input">
                                        <input type="number" disabled name="system.secondary_traits.AD.value" value="{{system.secondary_traits.AD.value}}" />
                                    </div>
                                </div>
                            </div>
                        </div>
                     </div>
                </div>

                <!-- Right Column: Status -->
                <div class="status-column">
                    <div class="status-section">
                        <div class="section-header">STATUS</div>
                        <table>
                            <thead>
                                <tr>
                                    <th>INJURY</th>
                                    <th>SCORE</th>
                                    <th>ARMOR</th>
                                    <th>PENALTY</th>
                                    <th>#</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>FLESH WOUND</td>
                                    <td><input type="number" disabled name="system.physical_status.flesh_wound.score" value="{{system.physical_status.flesh_wound.score}}" /></td>
                                    <td><input type="number" disabled name="system.physical_status.flesh_wound.armor" value="{{system.physical_status.flesh_wound.armor}}" /></td>
                                    <td>-1</td>
                                    <td><input type="number" name="system.physical_status.flesh_wound.amount" value="{{system.physical_status.flesh_wound.amount}}" /></td>
                                </tr>
                                <tr>
                                    <td>DEEP WOUND</td>
                                    <td><input type="number" disabled name="system.physical_status.deep_wound.score" value="{{system.physical_status.deep_wound.score}}" /></td>
                                    <td><input type="number" disabled name="system.physical_status.deep_wound.armor" value="{{system.physical_status.deep_wound.armor}}" /></td>
                                    <td>-2</td>
                                    <td><input type="number" name="system.physical_status.deep_wound.amount" value="{{system.physical_status.deep_wound.amount}}" /></td>
                                </tr>
                                <tr>
                                    <td>INSTANT DEATH</td>
                                    <td><input type="number" disabled value="{{system.physical_status.instant_death.score}}" /></td>
                                    <td><input type="number" disabled value="{{system.physical_status.instant_death.armor}}" /></td>
                                    <td>DEAD</td>
                                    <td> - </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- System Shock -->
            <div class="section-header">SYSTEM SHOCK</div>
            <div class="shock-track">
                <div class="shock-bar-container">
                    <!-- Threshold marker -->
                    <div class="threshold-marker" style="left: {{shockThresholdPosition}}">
                        <span class="threshold-label">Threshold: {{system.physical_status.system_shock.shock_threshold}}</span>
                    </div>
                    <!-- Current shock progress -->
                    <div class="shock-bar" style="width: {{currentShockWidth}}">
                        <span class="current-shock-label">{{system.physical_status.system_shock.current_shock}}</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Combat Tab -->
        <div class="tab" data-tab="combat">
            <!-- TO DO -->
        </div>

        <!-- Equipment Tab -->
        <div class="tab" data-tab="equipment">
            <!-- TO DO -->
        </div>
    </div>
</form>